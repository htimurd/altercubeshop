<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>AlterCUBE | Магазин</title>
    <style>
        :root { --gold: #ffcc00; --green: #3fb33f; --blue: #55aaff; --bg: #0f0f0f; --card: #1e1e1e; }
        body { background: var(--bg); color: white; font-family: 'Segoe UI', sans-serif; margin: 0; padding-bottom: 50px; }
        
        header { 
            background: #1a1a1a; padding: 0 5%; display: flex; justify-content: space-between; 
            align-items: center; border-bottom: 3px solid var(--gold); position: sticky; top: 0; z-index: 1000; height: 75px; 
        }
        .logo { font-size: 26px; font-weight: bold; color: var(--gold); text-shadow: 2px 2px #000; }
        
        #userBlock { display: none; align-items: center; gap: 15px; }
        .user-info { text-align: right; }
        .user-name { font-weight: bold; color: var(--gold); display: block; font-size: 16px; }
        .user-mail { font-size: 11px; color: #888; display: block; }
        .logout-btn { background: #ff4444; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 10px; margin-top: 2px; }
        .skin-head { width: 42px; height: 42px; border: 2px solid var(--gold); image-rendering: pixelated; background: #333; }
        
        .login-trigger { background: var(--blue); color: white; border: none; padding: 12px 25px; border-radius: 5px; font-weight: bold; cursor: pointer; box-shadow: 0 4px #2266aa; }

        /* Модальные окна */
        .modal-overlay { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.9); display: none; justify-content: center; align-items: center; 
            z-index: 2000; backdrop-filter: blur(8px); 
        }
        
        @keyframes flyIn {
            0% { opacity: 0; transform: scale(0.2); }
            100% { opacity: 1; transform: scale(1); }
        }

        .auth-card { 
            background: #252525; padding: 30px; border-radius: 15px; border: 2px solid var(--gold); 
            width: 350px; text-align: center; position: relative;
            animation: flyIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        input { width: 100%; padding: 12px; margin: 8px 0; background: #111; border: 1px solid #444; color: white; border-radius: 6px; box-sizing: border-box; outline: none; }
        input:focus { border-color: var(--blue); }
        .auth-btn { width: 100%; padding: 14px; background: var(--green); border: none; color: white; font-weight: bold; border-radius: 6px; cursor: pointer; margin-top: 15px; box-shadow: 0 4px #1a661a; }
        .switch-link { color: var(--blue); cursor: pointer; text-decoration: underline; font-size: 13px; display: block; margin-top: 15px; }
        .close-modal { position: absolute; top: 10px; right: 15px; font-size: 24px; cursor: pointer; color: #666; }

        /* Сетка товаров */
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; display: grid; grid-template-columns: repeat(auto-fill, minmax(230px, 1fr)); gap: 20px; }
        .section-title { grid-column: 1 / -1; text-align: center; color: var(--gold); text-transform: uppercase; margin: 40px 0 20px; font-size: 32px; text-shadow: 2px 2px #000; }
        
        .card { background: var(--card); border: 2px solid #333; border-radius: 12px; padding: 20px; text-align: center; transition: 0.3s; display: flex; flex-direction: column; }
        .card:hover { border-color: var(--gold); transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.5); }
        .card img { width: 64px; height: 64px; margin: 0 auto 15px; image-rendering: pixelated; }
        .price { font-size: 24px; color: #5ff55f; margin: 15px 0; font-weight: bold; }
        .buy-btn { background: var(--green); color: white; border: none; padding: 12px; width: 100%; cursor: pointer; font-weight: bold; border-radius: 6px; margin-top: auto; }

        /* Валюта */
        .slider-box { background: #111; padding: 15px; border-radius: 8px; margin: 10px 0; }
        input[type=range] { width: 100%; accent-color: var(--gold); cursor: pointer; }
    </style>
</head>
<body>

<header>
    <div class="logo">AlterCUBE</div>
    <div id="authContainer">
        <button class="login-trigger" id="loginBtn" onclick="openAuth('login')">ВОЙТИ</button>
        <div id="userBlock">
            <div class="user-info">
                <span class="user-name" id="displayNick">Имя</span>
                <span class="user-mail" id="displayMail">mail@gmail.com</span>
                <button class="logout-btn" onclick="logout()">Выйти</button>
            </div>
            <img src="" id="userHead" class="skin-head">
        </div>
    </div>
</header>

<!-- МОДАЛЬНЫЕ ОКНА -->
<div class="modal-overlay" id="modalOverlay">
    <!-- Вход -->
    <div class="auth-card" id="loginForm" style="display: none;">
        <span class="close-modal" onclick="closeAll()">&times;</span>
        <h2>Вход</h2>
        <input type="text" id="lNick" placeholder="Имя пользователя">
        <input type="password" id="lPass" placeholder="Пароль">
        <button class="auth-btn" onclick="processLogin()">ВОЙТИ</button>
        <div class="switch-link" onclick="openAuth('reg')">Нет аккаунта? Создать</div>
    </div>

    <!-- Регистрация -->
    <div class="auth-card" id="regForm" style="display: none;">
        <span class="close-modal" onclick="closeAll()">&times;</span>
        <h2>Регистрация</h2>
        <input type="text" id="rNick" placeholder="Имя пользователя">
        <input type="password" id="rPass1" placeholder="Пароль">
        <input type="password" id="rPass2" placeholder="Повтор пароля">
        <input type="email" id="rMail1" placeholder="Gmail">
        <input type="email" id="rMail2" placeholder="Подтвердите Gmail">
        <button class="auth-btn" onclick="processReg()">СОЗДАТЬ АККАУНТ</button>
        <div class="switch-link" onclick="openAuth('login')">Уже есть аккаунт? Войти</div>
    </div>

    <!-- ОКНО ПОКУПКИ -->
    <div class="auth-card" id="buyForm" style="display: none;">
        <span class="close-modal" onclick="closeAll()">&times;</span>
        <h2 id="buyTitle">Покупка</h2>
        <p id="itemPrice" style="color:#5ff55f; font-weight:bold;"></p>
        <input type="text" id="targetNick" placeholder="Имя пользователя для выдачи">
        <button class="auth-btn" onclick="confirmPurchase()">ПОДТВЕРДИТЬ</button>
    </div>
</div>

<div class="container">
    <h2 class="section-title">Привилегии</h2>
    <div class="card"><h3>Rager</h3><img src="https://minecraft.wiki"><div class="price">3 BYN</div><button class="buy-btn" onclick="openBuy('Rager', '3 BYN')">Купить</button></div>
    <div class="card"><h3>VIP</h3><img src="https://minecraft.wiki"><div class="price">5 BYN</div><button class="buy-btn" onclick="openBuy('VIP', '5 BYN')">Купить</button></div>
    <div class="card"><h3>Premium</h3><img src="https://minecraft.wiki"><div class="price">7 BYN</div><button class="buy-btn" onclick="openBuy('Premium', '7 BYN')">Купить</button></div>
    <div class="card"><h3>Berserk</h3><img src="https://minecraft.wiki"><div class="price">10 BYN</div><button class="buy-btn" onclick="openBuy('Berserk', '10 BYN')">Купить</button></div>
    <div class="card"><h3>Alter</h3><img src="https://minecraft.wiki"><div class="price">12 BYN</div><button class="buy-btn" onclick="openBuy('Alter', '12 BYN')">Купить</button></div>
    <div class="card"><h3>Custom</h3><img src="https://minecraft.wiki"><div class="price">15 BYN</div><button class="buy-btn" onclick="openBuy('Custom', '15 BYN')">Купить</button></div>
    <div class="card"><h3>D. Helper</h3><img src="https://minecraft.wiki"><div class="price">20 BYN</div><button class="buy-btn" onclick="openBuy('D. Helper', '20 BYN')">Купить</button></div>
    <div class="card"><h3>D. Ml. Moder</h3><img src="https://minecraft.wiki"><div class="price">23 BYN</div><button class="buy-btn" onclick="openBuy('D. Ml. Moder', '23 BYN')">Купить</button></div>
    <div class="card"><h3>D. Moder</h3><img src="https://minecraft.wiki"><div class="price">24 BYN</div><button class="buy-btn" onclick="openBuy('D. Moder', '24 BYN')">Купить</button></div>
    <div class="card"><h3>D. St. Moder</h3><img src="https://minecraft.wiki"><div class="price">25 BYN</div><button class="buy-btn" onclick="openBuy('D. St. Moder', '25 BYN')">Купить</button></div>
    <div class="card"><h3>D. Admin</h3><img src="https://minecraft.wiki"><div class="price">30 BYN</div><button class="buy-btn" onclick="openBuy('D. Admin', '30 BYN')">Купить</button></div>
    <div class="card" style="border-color:var(--gold)"><h3>CUBE</h3><img src="https://minecraft.wiki"><div class="price">35 BYN</div><button class="buy-btn" onclick="openBuy('CUBE', '35 BYN')">Купить</button></div>

    <h2 class="section-title">Валюта</h2>
    <div class="card" style="grid-column: span 1.5;">
        <h3>Койны</h3>
        <div class="slider-box">
            <input type="range" id="cR" min="1000" max="1000000" step="1000" value="1000" oninput="upd('c')">
            <div id="cD">1,000 Койнов</div>
        </div>
        <div class="price"><span id="cP">0.30</span> BYN</div>
        <button class="buy-btn" onclick="openBuy('Койны', document.getElementById('cP').innerText + ' BYN')">Купить</button>
    </div>
    
    <div class="card" style="grid-column: span 1.5;">
        <h3>Кубы</h3>
        <div class="slider-box">
            <input type="range" id="qR" min="1" max="2500" step="1" value="10" oninput="upd('q')">
            <div id="qD">10 Кубов</div>
        </div>
        <div class="price"><span id="qP">1.00</span> BYN</div>
        <button class="buy-btn" onclick="openBuy('Кубы', document.getElementById('qP').innerText + ' BYN')">Купить</button>
    </div>
</div>

<script>
    // Инициализация
    window.onload = () => {
        const u = localStorage.getItem('currentUser');
        if(u) showUser(JSON.parse(u));
    };

    function openAuth(mode) {
        document.getElementById('modalOverlay').style.display = 'flex';
        document.getElementById('loginForm').style.display = mode === 'login' ? 'block' : 'none';
        document.getElementById('regForm').style.display = mode === 'reg' ? 'block' : 'none';
        document.getElementById('buyForm').style.display = 'none';
    }

    function openBuy(name, price) {
        document.getElementById('modalOverlay').style.display = 'flex';
        document.getElementById('buyForm').style.display = 'block';
        document.getElementById('loginForm').style.display = 'none';
        document.getElementById('regForm').style.display = 'none';
        document.getElementById('buyTitle').innerText = "Покупка: " + name;
        document.getElementById('itemPrice').innerText = price;
    }

    function closeAll() { document.getElementById('modalOverlay').style.display = 'none'; }

    function confirmPurchase() {
        const target = document.getElementById('targetNick').value;
        if(!target) return alert("Введите имя пользователя!");
        alert("Запрос на покупку для " + target + " отправлен! (Здесь будет переход к оплате)");
        closeAll();
    }

    function processReg() {
        const n = document.getElementById('rNick').value, p1 = document.getElementById('rPass1').value, m1 = document.getElementById('rMail1').value;
        if(!n || p1 !== document.getElementById('rPass2').value || m1 !== document.getElementById('rMail2').value) return alert("Ошибка данных!");
        localStorage.setItem('user_' + n, JSON.stringify({n, p: p1, m: m1}));
        alert("Аккаунт создан!"); openAuth('login');
    }

    function processLogin() {
        const n = document.getElementById('lNick').value, p = document.getElementById('lPass').value;
        const data = localStorage.getItem('user_' + n);
        if(data && JSON.parse(data).p === p) {
            localStorage.setItem('currentUser', data);
            showUser(JSON.parse(data));
            closeAll();
        } else alert("Ошибка входа!");
    }

    function showUser(u) {
        document.getElementById('loginBtn').style.display = 'none';
        document.getElementById('userBlock').style.display = 'flex';
        document.getElementById('displayNick').innerText = u.n;
        document.getElementById('displayMail').innerText = u.m;
        document.getElementById('userHead').src = `https://mc-heads.net{u.n}`;
    }

    function logout() { localStorage.removeItem('currentUser'); location.reload(); }

    function upd(t) {
        let v = document.getElementById(t+'R').value;
        if(t=='c'){
            document.getElementById('cD').innerText = parseInt(v).toLocaleString() + " Койнов";
            document.getElementById('cP').innerText = ((v/1000)*0.30).toFixed(2);
        } else {
            document.getElementById('qD').innerText = v + " Кубов";
            document.getElementById('qP').innerText = (v*0.10).toFixed(2);
        }
    }
</script>
</body>
</html>
